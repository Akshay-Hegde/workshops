.. _geoserver.styling.geoexplorer:

GeoExplorer
===========

.. note:: GeoExplorer is currently available as part of OpenGeo Suite. This workshop uses a newer version of GeoExplorer that hasn't been released yet.

Creating style files by hand, regardless of the type of markup you use, can be a difficult and time-consuming process. Fortunately, there are some graphical tools that exist to help make the generating of styles in GeoServer easier.

One tool is called :guilabel:`GeoExplorer`. With GeoExplorer, you can create rules and symbolizers without ever needing to view any style code.

Using GeoExplorer
-----------------

#. Launch GeoExplorer. By default, GeoExplorer is located at `<http://localhost:8080/geoexplorer>`_.

   .. figure:: img/geoexplorer.png

      GeoExplorer

   By default, the display shows a "Streets" base map layer, which is from MapQuest/OpenStreetMap. There is a select box that can cycle between that, "Aerial", and none, for no base map.

   .. figure:: img/gx_aerial.png

      GeoExplorer with Aerial base map

#. Click the :guilabel:`Add layer` button. You will be asked to select the GeoServer endpoint to connect to. Leave the default as :guilabel:`/geoserver/wms/` and click :guilabel:`Connect`.

   .. figure:: img/gx_wmsendpoint.png

      Connecting to the local GeoServer WMS

&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&

#. In the resulting :guilabel:`Available Layers` dialog, select the four layers used in this workshop (not the ``earthmap`` layer group) and click :guilabel:`Add layers`. To select multiple layers, hold the Ctrl/Cmd key while clicking on the layer.

   .. note:: It may be easier to find the layers by clicking the :guilabel:`id` column to sort by workspace.

#. Click :guilabel:`Done` to return to the main map. The check boxes determine which layers are being viewed, with the order of the layers determining the rendering order. The layer list also contains an in-line legend for each layer, which is a compilation of all the Rules in the styles of the visible layer. Finally, the bulk of the window is taken up by the map itself.

   .. note:: Layer groups, being a compilation of layers, cannot be styled with GeoExplorer. However, if you edit the style of a layer that is contained in a layer group, the layer group will reflect the change.

   .. figure:: img/gx_layersadded.png

      Layers added to GeoExplorer

#. The layers when added to the map may not be in the correct order. Click to select a layer and drag to reorder the layers until they are in the following order:

   * cities
   * countries
   * ocean
   * shadedrelief

   .. figure:: img/gx_layersreorder.png

      Reordering layers

#. Finally, select :guilabel:`None` under the :guilabel:`Base Maps` list. The map should now look identical to the layer group.

   .. figure:: img/gx_layersreordered.png

      Layers in proper order
 

Editing an existing style
-------------------------

.. warning:: GeoExplorer makes changes directly to a style file. It is always a good idea to make a backup copy of your SLDs before using GeoExplorer.

#. Before we can make any changes to styles, we have to log in to GeoExplorer. Click the login button at the very top right of the window and enter your GeoServer admin credentials:  ``admin`` / ``geoserver`` .

   .. figure:: img/gx_loginbutton.png

      Login button

   .. figure:: img/gx_logindialog.png

      Login dialog

#. Once logged in, the editing tools will be enabled. Select the ``countries`` layer by single clicking on it in the layer list. Then click on the palette icon right above the layer list to Edit Styles.

   .. note:: If the icon is disabled, make sure that you have logged in successfully and that you have selected the correct layer.

   .. figure:: img/gx_editstylesbutton.png

      Click to edit styles

#. A list will display containing all the style rules (in this case, four of them).

   .. figure:: img/gx_listofrules.png

      List of style rules.

#. Click on the first rule and then click :guilabel:`Edit`. 

   .. figure:: img/gx_editrulebutton.png

      Click to edit a style rule

#. A style rule editor will display.

   .. figure:: img/gx_editrulebefore.png

      Style rule editor

#. Make some changes to the rule and see how it updates in real time. As a suggestion, change the Fill Color by clicking on the color box and selecting a new color. 

   .. figure:: img/gx_colorpicker.png

      Color picker

#. Finally, click :guilabel:`Save` to persist your changes.

   .. figure:: img/gx_editruleafter.png

      Style edited

#. Now take a look at the SLD code that GeoExplorer has created. Navigate back to GeoServer, to the :guilabel:`Styles` menu, and then to the :guilabel:`countries` style to view it.

   .. figure:: img/gx_verify.png

      SLD generated by GeoExplorer showing changed color


Bonus
~~~~~

Add a new rule that displays the label of the country. Don't worry about label placement. Hint: The attribute to display is called NAME. But if you didn't know this, how would you find it out?
